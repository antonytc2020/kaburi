<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Kaburi - Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            min-height: 100vh;
            height: 100vh;
            width: 100vw;
            margin: 0;
            transition: background 1s;
            background-image:
                linear-gradient(120deg, rgba(183,28,28,0.70) 0%, rgba(33,33,33,0.80) 100%),
                url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            overflow-x: hidden;
        }
        body.logged {
            background: linear-gradient(135deg, #232526 0%, #6a11cb 25%, #2575fc 50%, #ff6a00 75%, #f7971e 100%);
            background-size: 400% 400%;
            animation: rainbowBG 10s ease-in-out infinite;
        }
        @keyframes rainbowBG {
            0% {background-position: 0% 50%;}
            50% {background-position: 100% 50%;}
            100% {background-position: 0% 50%;}
        }
        /* Login panel */
        #auth-section {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(0,0,0,0.93);
            padding: 26px 24px 18px 24px;
            border-radius: 12px;
            box-shadow: 0 4px 16px #000b;
            color: #fff;
            width: 320px;
            z-index: 10;
        }
        #auth-section.hidden {
            display: none;
        }
        #auth-section h2 { text-align: center; color: #ff5252; margin-top: 0;}
        label { display: block; margin-top: 10px; }
        input {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border-radius: 4px;
            border: none;
            background: #222;
            color: #fff;
        }
        button[type="submit"] {
            margin-top: 15px;
            padding: 10px 20px;
            width: 100%;
            background: #ff5252;
            color: #fff;
            font-size: 1.1em;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 2px 4px #0007;
            transition: background 0.2s;
        }
        button[type="submit"]:hover { background: #b71c1c; }
        .switch { margin-top: 20px; text-align: center;}
        #logout-btn {
            display: none;
            position: absolute;
            top: 30px;
            right: 30px;
            background: #ff5252;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 28px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 16px #000a;
            z-index: 11;
            transition: filter 0.2s;
        }
        #logout-btn.show {
            display: block;
        }
        /* Opciones después de login */
        #main-options {
            display: none;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0; left: 0;
            z-index: 1;
        }
        #main-options.show {
            display: flex;
        }
        .options-center {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
        }
        .big-option-btn {
            width: 320px;
            max-width: 90vw;
            padding: 36px 0;
            margin: 18px 0;
            font-size: 2em;
            font-weight: bold;
            border-radius: 16px;
            border: none;
            color: #fff;
            background: linear-gradient(90deg, #ff5252 0%, #f7971e 100%);
            box-shadow: 0 3px 12px #0006;
            cursor: pointer;
            transition: transform 0.1s, filter 0.2s;
        }
        .big-option-btn:hover {
            filter: brightness(1.1);
            transform: scale(1.04);
        }
        /* Responsive */
        @media (max-width: 500px) {
            #auth-section { width: 90vw; right: 5vw; padding: 14px 8px;}
            .big-option-btn { font-size: 1.25em; padding: 24px 0; }
            .options-center { padding-top: 70px;}
            #logout-btn { padding: 10px 16px; font-size: 1em; }
        }
    </style>
</head>
<body>
    <!-- Panel de login -->
    <div class="container" id="auth-section">
        <h2 id="form-title">Iniciar Sesión</h2>
        <form id="login-form">
            <label for="login-email">Correo electrónico:</label>
            <input type="email" id="login-email" autocomplete="username" required>
            <label for="login-password">Contraseña:</label>
            <input type="password" id="login-password" autocomplete="current-password" required>
            <button type="submit">Ingresar</button>
        </form>
        <form id="register-form" style="display:none;">
            <label for="register-email">Correo electrónico:</label>
            <input type="email" id="register-email" autocomplete="username" required>
            <label for="register-password">Contraseña:</label>
            <input type="password" id="register-password" autocomplete="new-password" required>
            <button type="submit">Registrarse</button>
        </form>
        <div class="switch" id="switch-area">
            <span id="toggle-msg">¿No tienes cuenta?</span>
            <a href="#" id="toggle-link">Registrarse</a>
        </div>
    </div>

    <!-- Botón cerrar sesión -->
    <button id="logout-btn">Cerrar sesión</button>

    <!-- Opciones después de login -->
    <div id="main-options">
        <div class="options-center">
            <button class="big-option-btn" onclick="alert('Hacer pedido')">Hacer pedido</button>
            <button class="big-option-btn" onclick="alert('Reservar pedido')">Reservar pedido</button>
            <button class="big-option-btn" onclick="alert('Pedir por delivery')">Pedir por delivery</button>
        </div>
    </div>

    <script>
        // Alternar entre login y registro
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const toggleLink = document.getElementById('toggle-link');
        const formTitle = document.getElementById('form-title');
        const toggleMsg = document.getElementById('toggle-msg');
        const authSection = document.getElementById('auth-section');
        const switchArea = document.getElementById('switch-area');
        const logoutBtn = document.getElementById('logout-btn');
        const mainOptions = document.getElementById('main-options');

        toggleLink.onclick = function(e){
            e.preventDefault();
            if(loginForm.style.display !== 'none'){
                loginForm.style.display = 'none';
                registerForm.style.display = '';
                formTitle.textContent = 'Registrarse';
                toggleMsg.textContent = '¿Ya tienes cuenta?';
                toggleLink.textContent = 'Iniciar sesión';
            } else {
                loginForm.style.display = '';
                registerForm.style.display = 'none';
                formTitle.textContent = 'Iniciar Sesión';
                toggleMsg.textContent = '¿No tienes cuenta?';
                toggleLink.textContent = 'Registrarse';
            }
        };

        // Simulación de "base de datos" en localStorage
        function getUsers(){
            return JSON.parse(localStorage.getItem('users') || '{}');
        }
        function saveUser(email, password){
            const users = getUsers();
            users[email] = password;
            localStorage.setItem('users', JSON.stringify(users));
        }
        function validateUser(email, password){
            const users = getUsers();
            return users[email] && users[email] === password;
        }

        // Manejar registro
        registerForm.onsubmit = function(e){
            e.preventDefault();
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const users = getUsers();
            if(users[email]){
                alert('Este correo ya está registrado.');
            } else {
                saveUser(email, password);
                alert('Registro exitoso. Ahora inicia sesión.');
                loginForm.style.display = '';
                registerForm.style.display = 'none';
                formTitle.textContent = 'Iniciar Sesión';
                toggleMsg.textContent = '¿No tienes cuenta?';
                toggleLink.textContent = 'Registrarse';
                document.getElementById('login-email').focus();
            }
        };

        // Manejar login
        loginForm.onsubmit = function(e){
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            if(validateUser(email, password)){
                localStorage.setItem('session', email);
                document.body.classList.add('logged');
                mainOptions.classList.add('show');
                authSection.classList.add('hidden');
                logoutBtn.classList.add('show');
            } else {
                alert('Correo o contraseña incorrectos.');
            }
        };

        // Cerrar sesión
        logoutBtn.onclick = function() {
            localStorage.removeItem('session');
            document.body.classList.remove('logged');
            mainOptions.classList.remove('show');
            authSection.classList.remove('hidden');
            logoutBtn.classList.remove('show');
            loginForm.reset();
            registerForm.reset();
            loginForm.style.display = '';
            registerForm.style.display = 'none';
            formTitle.textContent = 'Iniciar Sesión';
            toggleMsg.textContent = '¿No tienes cuenta?';
            toggleLink.textContent = 'Registrarse';
            switchArea.style.display = '';
        };

        // Mantener sesión si ya está iniciada
        window.onload = function(){
            if(localStorage.getItem('session')){
                document.body.classList.add('logged');
                mainOptions.classList.add('show');
                authSection.classList.add('hidden');
                logoutBtn.classList.add('show');
            }
        }
    </script>
</body>
</html>
