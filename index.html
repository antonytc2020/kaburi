<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Kaburi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        body {
            min-height: 100vh;
            min-width: 100vw;
            font-family: Arial, sans-serif;
            background:
                linear-gradient(120deg, rgba(183,28,28,0.65), rgba(33,33,33,0.85)),
                url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZHKkoOaaBDhd34-ttLRBHudU_MNirAsIKRRuOG5Hd2G1OJcsGe8YwvZE9VO3d0gbIzn_cIt59X0ACsnRB5ToFABfusc8yIpq6lf77-EZCFQ'),
                url('https://p16-sign-va.tiktokcdn.com/tos-maliva-avt-0068/606c0b3c1ecb5ca7d4e7c9e856ade344~tplv-tiktokx-cropcenter:1080:1080.jpeg?dr=14579&refresh_token=0af96376&x-expires=1761796800&x-signature=YRCNvkKdx%2BsyMYGefK8D0hS8W4Q%3D&t=4d5b0474&ps=13740610&shp=a5d48078&shcp=81f88b70&idc=my');
            background-repeat: no-repeat, no-repeat, no-repeat;
            background-size: cover, contain, 120px;
            background-position: center, center, 70% 8%;
            color: #fff; overflow-x: hidden;
        }
        .logo-global {
            position: fixed;
            top: 25px;
            left: 25px;
            z-index: 20;
            display: flex;
            align-items: center;
        }
        .logo-global img {
            width: 90px;
            height: 90px;
            object-fit: contain;
            background: #fff;
            border-radius: 24px;
            box-shadow: 0 2px 12px #0008;
            padding: 10px;
        }
        .user-name-badge {
            display: none;
            position: fixed;
            top: 48px;
            left: 130px;
            background: none;
            color: #fff;
            font-size: 4em;
            border: none;
            border-radius: 0;
            padding: 0 18px 0 0;
            font-weight: bold;
            z-index: 22;
            cursor: pointer;
            opacity: 0;
            transform: translateY(-30px);
            transition: 
                opacity 0.4s, 
                transform 0.5s,
                top 1.2s cubic-bezier(0.22,1,0.36,1),
                left 1.2s cubic-bezier(0.22,1,0.36,1),
                font-size 1.2s cubic-bezier(0.22,1,0.36,1),
                letter-spacing 1.2s cubic-bezier(0.22,1,0.36,1);
            outline: none;
            box-shadow: none;
        }
        .user-name-badge.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .user-name-badge.to-corner {
            top: 40px;
            left: 140px;
            font-size: 1.23em;
            letter-spacing: 1.5px;
            padding: 0 9px 0 0;
        }
        .user-name-dropdown {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 310px;
            background: #181818f2;
            color: #fff;
            border-radius: 0 18px 18px 0;
            box-shadow: 6px 0 38px #000b;
            z-index: 30;
            font-size: 1.1em;
            animation: fadeInDrop 0.18s;
        }
        @keyframes fadeInDrop { from { opacity:0; transform: translateX(-16px); } to { opacity:1; transform:translateX(0);} }
        .user-name-dropdown ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .user-name-dropdown li {
            border-bottom: 1px solid #ff52525a;
        }
        .user-name-dropdown li:last-child {
            border-bottom: none;
        }
        .user-name-dropdown button, .user-name-dropdown a {
            display: block;
            width: 100%;
            background: none;
            border: none;
            color: inherit;
            text-align: left;
            padding: 22px 32px;
            font-size: 1em;
            cursor: pointer;
            outline: none;
            transition: background 0.18s;
            text-decoration: none;
        }
        .user-name-dropdown button:hover, .user-name-dropdown a:hover {
            background: #ff5252cc;
        }
        .welcome-message {
            position: fixed;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            color: #fff;
            z-index: 50;
            font-weight: 900;
            opacity: 0;
            transition:
                opacity 0.7s,
                top 1.2s cubic-bezier(0.22,1,0.36,1),
                left 1.2s cubic-bezier(0.22,1,0.36,1),
                font-size 1.2s cubic-bezier(0.22,1,0.36,1),
                transform 1.2s cubic-bezier(0.22,1,0.36,1);
            pointer-events: none;
            text-shadow: 0 6px 30px #000a, 0 1px 1px #b71c1c;
            letter-spacing: 2px;
        }
        .welcome-message.show { opacity: 1; }
        .welcome-message.to-corner {
            top: 40px;
            left: 140px;
            transform: translate(0, 0);
            font-size: 1.23em;
        }
        @media (max-width: 600px) {
            .logo-global img { width: 65px; height: 65px; padding: 4px;}
            .logo-global { top: 5px; left: 5px;}
            .user-name-badge { top: 15px; left: 70px; font-size: 1.4em; }
            .user-name-badge.to-corner { top: 15px; left: 70px; font-size: 1em; }
            .user-name-dropdown { width: 97vw; min-width:unset; border-radius:0 0 18px 18px; }
            #auth-section { width: 96vw; left: 2vw; right: 2vw; padding: 12px 6px;}
        }
        /* Panel auth animación */
        #auth-section {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateY(-80vh);
            background: #181818ee;
            box-shadow: 0 4px 24px #000d;
            padding: 32px 28px 24px 28px;
            border-radius: 14px;
            width: 340px;
            z-index: 10;
            opacity: 0;
            transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.8s;
        }
        #auth-section.show {
            transform: translate(-50%, -50%) translateY(0);
            opacity: 1;
        }
        #auth-section.hidden { display: none; }
        .logo-login {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        .logo-login img {
            width: 115px;
            height: 115px;
            background: #fff;
            border-radius: 50%;
            object-fit: contain;
            box-shadow: 0 2px 12px #0008;
            padding: 14px;
        }
        #auth-section h2 { 
            text-align: center; 
            color: #ff5252; 
            margin-top: 0;
            letter-spacing: 2px;
            text-shadow: 0 2px 8px #000a;
        }
        label { display: block; margin-top: 14px; }
        input {
            width: 100%;
            padding: 9px;
            margin-top: 6px;
            border-radius: 5px;
            border: 1px solid #333;
            background: #222c;
            color: #fff;
            font-size: 1em;
        }
        button[type="submit"] {
            margin-top: 19px;
            padding: 12px 20px;
            width: 100%;
            background: #ff5252;
            color: #fff;
            font-size: 1.15em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0 2px 6px #0007;
            transition: background 0.2s;
        }
        button[type="submit"]:hover { background: #b71c1c; }
        .switch { margin-top: 22px; text-align: center;}
        #logout-btn {
            display: none;
            position: fixed;
            top: 30px;
            right: 30px;
            background: #ff5252;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 28px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 16px #000a;
            z-index: 11;
            transition: filter 0.2s, background 0.2s;
        }
        #logout-btn.show { display: block; }
    </style>
</head>
<body>
    <div class="logo-global">
        <img src="https://p16-sign-va.tiktokcdn.com/tos-maliva-avt-0068/606c0b3c1ecb5ca7d4e7c9e856ade344~tplv-tiktokx-cropcenter:1080:1080.jpeg?dr=14579&refresh_token=0af96376&x-expires=1761796800&x-signature=YRCNvkKdx%2BsyMYGefK8D0hS8W4Q%3D&t=4d5b0474&ps=13740610&shp=a5d48078&shcp=81f88b70&idc=my" alt="Kaburi Logo" draggable="false">
    </div>
    <button class="user-name-badge" id="user-name-badge"></button>
    <nav class="user-name-dropdown" id="user-dropdown">
        <ul>
            <li><button type="button" onclick="alert('Cuenta: Pronto disponible')">Cuenta</button></li>
            <li><button type="button" onclick="alert('Ajustes de pago: Pronto disponible')">Ajustes de pago</button></li>
            <li><button type="button" onclick="alert('Información: Pronto disponible')">Información</button></li>
            <li><button type="button" onclick="alert('Seguridad: Pronto disponible')">Seguridad</button></li>
            <li><button type="button" onclick="alert('Términos y condiciones: Pronto disponible')">Términos y condiciones</button></li>
            <li><button type="button" onclick="eliminarCuenta()">Eliminar cuenta</button></li>
        </ul>
    </nav>
    <div class="welcome-message" id="welcome-message"></div>
    <div class="container" id="auth-section">
        <div class="logo-login">
            <img src="https://p16-sign-va.tiktokcdn.com/tos-maliva-avt-0068/606c0b3c1ecb5ca7d4e7c9e856ade344~tplv-tiktokx-cropcenter:1080:1080.jpeg?dr=14579&refresh_token=0af96376&x-expires=1761796800&x-signature=YRCNvkKdx%2BsyMYGefK8D0hS8W4Q%3D&t=4d5b0474&ps=13740610&shp=a5d48078&shcp=81f88b70&idc=my" alt="Kaburi Logo" draggable="false">
        </div>
        <h2 id="form-title">Iniciar Sesión</h2>
        <form id="login-form">
            <label for="login-email">Correo electrónico:</label>
            <input type="email" id="login-email" autocomplete="username" required>
            <label for="login-password">Contraseña:</label>
            <input type="password" id="login-password" autocomplete="current-password" required>
            <button type="submit">Ingresar</button>
        </form>
        <form id="register-form" style="display:none;">
            <label for="register-nombre">Nombre:</label>
            <input type="text" id="register-nombre" required>
            <label for="register-apellido">Apellido:</label>
            <input type="text" id="register-apellido" required>
            <label for="register-edad">Edad:</label>
            <input type="number" id="register-edad" min="1" required>
            <label for="register-direccion">Dirección:</label>
            <input type="text" id="register-direccion" required>
            <label for="register-telefono">Número telefónico:</label>
            <input type="tel" id="register-telefono" required pattern="[0-9]{6,}">
            <label for="register-email">Correo electrónico:</label>
            <input type="email" id="register-email" autocomplete="username" required>
            <label for="register-password">Contraseña:</label>
            <input type="password" id="register-password" autocomplete="new-password" required>
            <button type="submit">Registrarse</button>
        </form>
        <div class="switch" id="switch-area">
            <span id="toggle-msg">¿No tienes cuenta?</span>
            <a href="#" id="toggle-link">Registrarse</a>
        </div>
        <div style="text-align:center; margin-top:18px;">
            <a href="#" id="forgot-link" style="color:#43e8ff;text-decoration:underline;cursor:pointer;font-size:1em;">
                ¿Olvidaste tu contraseña?
            </a>
        </div>
        <form id="recover-form" style="display:none; margin-top:20px;">
            <label for="recover-contact">Ingresa tu correo o número telefónico:</label>
            <input type="text" id="recover-contact" required>
            <button type="submit">Enviar código de recuperación</button>
            <div id="recover-message" style="margin-top:14px;color:#f7971e;font-size:1.09em;"></div>
        </form>
    </div>
    <button id="logout-btn">Cerrar sesión</button>
    <!-- Agrega aquí el resto de tus paneles y lógica de carta/pedidos si lo necesitas -->
    <script>
        // Animación panel de login
        window.onload = function(){
            setTimeout(() => {
                document.getElementById('auth-section').classList.add('show');
            }, 150);
        };

        // Login/registro y referencias JS
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const toggleLink = document.getElementById('toggle-link');
        const formTitle = document.getElementById('form-title');
        const toggleMsg = document.getElementById('toggle-msg');
        const authSection = document.getElementById('auth-section');
        const switchArea = document.getElementById('switch-area');
        const logoutBtn = document.getElementById('logout-btn');
        const userNameBadge = document.getElementById('user-name-badge');
        const userDropdown = document.getElementById('user-dropdown');
        const welcomeMessage = document.getElementById('welcome-message');
        const forgotLink = document.getElementById('forgot-link');
        const recoverForm = document.getElementById('recover-form');
        const recoverContact = document.getElementById('recover-contact');
        const recoverMessage = document.getElementById('recover-message');
        let dropdownOpen = false;

        // Bienvenida muy grande y transición a la esquina superior izquierda y luego muestra el nombre como botón sin marco
        function showWelcome(nombre) {
            welcomeMessage.textContent = `¡Bienvenido, ${nombre}!`;
            welcomeMessage.className = "welcome-message show";
            userNameBadge.textContent = nombre;
            userNameBadge.classList.remove('to-corner');
            userNameBadge.style.display = "none";
            setTimeout(() => {
                welcomeMessage.className += " to-corner";
            }, 1400);
            setTimeout(() => {
                welcomeMessage.className = "welcome-message";
                userNameBadge.classList.add('show', 'to-corner');
                userNameBadge.style.display = "block";
            }, 2600);
        }

        // Badge y menú lateral
        userNameBadge.onclick = function(e) {
            e.stopPropagation();
            if (dropdownOpen) {
                userDropdown.style.display = "none";
                dropdownOpen = false;
            } else {
                userDropdown.style.display = "block";
                dropdownOpen = true;
            }
        };
        document.addEventListener('click', function(e){
            if (dropdownOpen && !userDropdown.contains(e.target) && e.target !== userNameBadge) {
                userDropdown.style.display = "none";
                dropdownOpen = false;
            }
        });
        function eliminarCuenta() {
            if (confirm("¿Seguro que quieres eliminar tu cuenta? Esto no se puede deshacer.")) {
                const session = JSON.parse(localStorage.getItem('session') || '{}');
                const users = JSON.parse(localStorage.getItem('users') || '{}');
                if (session.email && users[session.email]) {
                    delete users[session.email];
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.removeItem('session');
                    alert("Cuenta eliminada correctamente.");
                    location.reload();
                } else {
                    alert("Error al eliminar la cuenta.");
                }
            }
        }

        // Toggle login/registro
        toggleLink.onclick = function(e){
            e.preventDefault();
            if(loginForm.style.display !== 'none'){
                loginForm.style.display = 'none';
                registerForm.style.display = '';
                formTitle.textContent = 'Registrarse';
                toggleMsg.textContent = '¿Ya tienes cuenta?';
                toggleLink.textContent = 'Iniciar sesión';
            } else {
                loginForm.style.display = '';
                registerForm.style.display = 'none';
                formTitle.textContent = 'Iniciar Sesión';
                toggleMsg.textContent = '¿No tienes cuenta?';
                toggleLink.textContent = 'Registrarse';
            }
        };

        // Registro
        function getUsers(){
            return JSON.parse(localStorage.getItem('users') || '{}');
        }
        function saveUser(email, password, nombre, apellido, edad, direccion, telefono){
            const users = getUsers();
            users[email] = {password, nombre, apellido, edad, direccion, telefono};
            localStorage.setItem('users', JSON.stringify(users));
        }
        function validateUser(email, password){
            const users = getUsers();
            return users[email] && users[email].password === password ? users[email] : null;
        }

        registerForm.onsubmit = function(e){
            e.preventDefault();
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const nombre = document.getElementById('register-nombre').value;
            const apellido = document.getElementById('register-apellido').value;
            const edad = document.getElementById('register-edad').value;
            const direccion = document.getElementById('register-direccion').value;
            const telefono = document.getElementById('register-telefono').value;
            const users = getUsers();
            if(users[email]){
                alert('Este correo ya está registrado.');
            } else {
                saveUser(email, password, nombre, apellido, edad, direccion, telefono);
                alert('Registro exitoso. Ahora inicia sesión.');
                loginForm.style.display = '';
                registerForm.style.display = 'none';
                formTitle.textContent = 'Iniciar Sesión';
                toggleMsg.textContent = '¿No tienes cuenta?';
                toggleLink.textContent = 'Registrarse';
                document.getElementById('login-email').focus();
            }
        };

        // Login
        loginForm.onsubmit = function(e){
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const user = validateUser(email, password);
            if(user){
                localStorage.setItem('session', JSON.stringify({email, nombre: user.nombre}));
                showWelcome(user.nombre);
                setTimeout(() => {
                    document.getElementById('auth-section').classList.remove('show');
                }, 300);
                setTimeout(() => {
                    // Aquí puedes mostrar tus paneles/pedidos (mainOptions.classList.add('show'), etc)
                }, 2600);
            } else {
                alert('Correo o contraseña incorrectos.');
            }
        };

        // Recuperación de contraseña
        forgotLink.onclick = function(e){
            e.preventDefault();
            loginForm.style.display = 'none';
            registerForm.style.display = 'none';
            switchArea.style.display = 'none';
            recoverForm.style.display = '';
            formTitle.textContent = 'Recuperar cuenta';
            recoverMessage.textContent = '';
        };
        recoverForm.onsubmit = function(e){
            e.preventDefault();
            const contacto = recoverContact.value.trim();
            if(!contacto){
                recoverMessage.textContent = "Por favor ingresa tu correo o número telefónico.";
                return;
            }
            const users = JSON.parse(localStorage.getItem('users') || '{}');
            let found = false;
            for (let email in users) {
                if (email === contacto || users[email].telefono === contacto) {
                    found = true;
                    break;
                }
            }
            if (found) {
                recoverMessage.style.color = "#43e8ff";
                recoverMessage.textContent = "¡Te hemos enviado un mensaje de recuperación a tu correo o teléfono!";
            } else {
                recoverMessage.style.color = "#ff5252";
                recoverMessage.textContent = "Usuario no encontrado. Intenta con otro correo o número.";
            }
            setTimeout(()=>{
                formTitle.textContent = 'Iniciar Sesión';
                recoverForm.style.display = 'none';
                loginForm.style.display = '';
                switchArea.style.display = '';
            },2500);
        };

        // Logout
        logoutBtn.onclick = function() {
            localStorage.removeItem('session');
            userNameBadge.classList.remove('show', 'to-corner');
            userDropdown.style.display = "none";
            dropdownOpen = false;
            loginForm.reset();
            registerForm.reset();
            loginForm.style.display = '';
            registerForm.style.display = 'none';
            formTitle.textContent = 'Iniciar Sesión';
            toggleMsg.textContent = '¿No tienes cuenta?';
            toggleLink.textContent = 'Registrarse';
            switchArea.style.display = '';
        };
    </script>
</body>
</html>
